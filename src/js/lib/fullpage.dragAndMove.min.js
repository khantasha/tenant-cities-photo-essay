/*!
 * fullpage.js Drag And Move Extension 0.0.7 for fullPage.js v3
 * https://github.com/alvarotrigo/fullPage.js
 *
 * @license This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
window.fp_dragAndMoveExtension=function(){var n=this,e=fp_utils,t=fp_utils.$,o=fullpage_api.getFullpageData(),i=o.options,r=o.internals,a=".fullpage-wrapper",l=".active",s=".fp-section",u=s+l,d=".fp-slide"+l,c=".fp-slides",v=".fp-slidesContainer";n.isGrabbing=!1,n.isAnimating=!1;var m,f,g,w,h,p,b,A,S,E=0,M=null,L=null,y=0,T=0,C=.01,x=.85,F=0,G=0,D=0,H=0,B=0,k=0,q=!1,z=!1,P=0,O=!1,R=e.css,W=e.trigger,_=e.prev,I=e.next,Y=e.closest,N=r.getMSPointer();function V(){n.isAnimating&&(function(){var e,t;z?(e=r.getDestinationPosition(L),t=F):null!=L&&(e=L.offsetLeft,t=G),$((null!=L?-1*e-t:0)*C),m=z?F<D?"up":F>D?"down":"none":G<H?"left":G>H?"right":"none",n.isGrabbing&&$(z?D-F-y:H-G-T);var o,i,a=z?F:G;!n.isGrabbing&&a<0&&r.scrollHandler(),z?(F+=y*=x,W(p,"onScroll")):G+=T*=x,n.isGrabbing||q||(o=a,i=z?F:G,Math.round(100*i)==Math.round(100*o)&&E++,E>2&&(n.isAnimating=!1))}(),function(){var n=z?p:t(v,f)[0];if(null!=n)if(i.css3&&(!z||z&&i.autoScrolling&&!i.scrollBar)){var e=z?"translate3d(0px, "+Math.round(F)+"px, 0px)":"translate3d("+Math.round(G)+"px, 0px, 0px)";R(n,r.getTransforms(e))}else i.autoScrolling&&!i.scrollBar&&z?R(n,"top",Math.round(F)):z?window.scrollTo(0,Math.round(-F)):Y(n,c).scrollLeft=-1*Math.round(G)}()),w=window.requestAnimFrame(V)}function X(e){var t=e.detail,o=t.value;void 0!==t.directions||(o?n.init():n.destroy())}function $(n){z?y+=n:T+=n}function j(o){if(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",j),O)O=!1;else{var i=z?e.getWindowHeight():window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth;if((P<30||P<i/2&&!(m===M))&&(L=z?t(u)[0]:t(d,t(u)[0])[0]),!z&&L&&n.isGrabbing&&n.isAnimating){var a=t(c,f)[0];null!=a&&r.landscapeScroll(a,L,M)}if(W(p,"onGrab",!1),n.isGrabbing=!1,q=!1,!g)if(z){var l={up:null!=_(t(u)[0])?I(L):t(u)[0],down:null!=I(t(u)[0])?_(L):t(u)[0]};if(l[M]){var s=t(d,l[M])[0];"none"!==M&&null!=s&&r.silentLandscapeScroll(s,"internal")}}else r.silentScroll(r.getDestinationPosition(t(u)[0]))}}function J(e){if(E=0,q=!0,(new Date).getTime(),r.isReallyTouch(e)){var t=r.getEventsPage(e);b=t.y,A=t.x,B=n.getCurrentScroll(),k=n.getCurrentScrollSlides(e),["touchmove",N.move].forEach(function(n){window.addEventListener(n,U,{passive:!1})}),window.addEventListener("touchend",j)}}function K(e){p=p||t(a)[0],e.target===t("html")[0]||3==e.which?(O=!0,i.fitToSection=!0):(g=E,E=0,q=!0,(new Date).getTime(),b=Q(e,"y"),A=Q(e,"x"),B=n.getCurrentScroll(),k=n.getCurrentScrollSlides(e),U(e)),window.addEventListener("mousemove",U),window.addEventListener("mouseup",j)}function Q(n,e){var t="x"===e;if(r.isTouch&&r.isReallyTouch(n)){var o=r.getEventsPage(n);return t?o.x:o.y}return t?n.pageX:i.scrollBar||!i.autoScrolling?n.screenY:n.pageY}function U(o){var a,l;l=Q(o,"x");var c,m,g,w,h,S=(a=Q(o,"y"))-b,E=l-A;if(!(Math.abs(S)<5&&Math.abs(E)<5||Math.abs(S)<5&&Math.abs(S)>Math.abs(E)||Math.abs(E)<5&&Math.abs(E)>Math.abs(S))){if(q){if(!n.isGrabbing){z=Math.abs(S)>Math.abs(E),r.removeAnimation(p);var y=t(v,f)[0];null!=y&&r.removeAnimation(y)}W(p,"onGrab",!0),n.isGrabbing=!0}var T=Y(o.target,s),C=T?t(d,T)[0]:null,x=t(u)[0],O={up:_(x),down:I(x),left:C?_(C):null,right:C?I(C):null,none:x};n.isGrabbing&&(F=n.getCurrentScroll(),G=n.getCurrentScrollSlides(o),m=l,g=a,w=z?b:A,h=z?g:m,P=Math.abs(w-h),c=L=O[M=w>h?z?"down":"right":w<h?z?"up":"left":"none"],L=null!=c?c:z?t(u)[0]:t(d,f)[0],n.isAnimating="vertical"!==i.dragAndMove&&"horizontal"!==i.dragAndMove||"vertical"===i.dragAndMove&&z||"horizontal"===i.dragAndMove&&!z,n.isAnimating=n.isAnimating&&r.isScrollAllowed.m[M]),D=B+S,H=k+E,n.isAnimating&&e.preventDefault(o)}}function Z(n){var e=n?"addEventListener":"removeEventListener";["touchstart",N.down].forEach(function(n){p[e](n,r.touchStartHandler)}),["touchmove",N.move].forEach(function(n){p[e](n,r.touchMoveHandler)})}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){w=window.setTimeout(n,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(n){window.clearTimeout(n)},n.init=function(t){return h=h||e.deepExtend({},i).dragAndMove,i.dragAndMove=h,i.fitToSection=!1,["continuousHorizontal","continuousVertical"].forEach(function(n){i[n]&&(i[n]=!1,e.showError("error","The option `"+n+"` is not compatible with `dragAndDrop`; `"+n+"` desactivated."))}),i.scrollOverflow&&e.showError("warn","The option `scrollOverflow` is not fully compatible with `dragAndDrop`; Scrolling sections/slides will not work when dragging"),"fingersonly"!==i.dragAndMove&&window.addEventListener("mousedown",K),r.container.addEventListener("setAllowScrolling",X),V(),n.turnOffTouch(),n},n.turnOffTouch=function(){p=p||t(a)[0],"mouseonly"!==i.dragAndMove&&null!=p&&(Z(!1),"mouseonly"!==i.dragAndMove&&["touchstart",N.down].forEach(function(n){p.addEventListener(n,J)}))},n.getCurrentScroll=function(){if(!i.css3||!i.autoScrolling||i.scrollBar)return i.autoScrolling&&!i.scrollBar?parseInt(getComputedStyle(p).top):-e.getScrollTop();var n=getComputedStyle(p).transform;return void 0!==(n=void 0===n?getComputedStyle(p)["-webkit-transform"]:n)?parseInt(n.split(",")[5]):void 0},n.getCurrentScrollSlides=function(n){var e=Y(n.target,s);null==(f=null!=e?e:f)&&(f=t(u)[0]);var o=t(c,f)[0];if(null!=o){var r=t(v,o)[0];if(!i.css3)return-o.scrollLeft;var l=getComputedStyle(r).transform;if(void 0!==(l=void 0===l?t(a).css("-webkit-transform"):l))return"none"===l?0:parseInt(l.split(",")[4])}return 0},n.getDocumentHeight=function(){var n=0,e=t(s),o=e.length;return e.forEach(function(e,t){t!==o&&(n+=e.offsetHeight)}),n},n.destroy=function(){["touchstart",N.down].forEach(function(n){p.removeEventListener(n,J)}),["touchmove",N.move].forEach(function(n){p.removeEventListener(n,U,{passive:!1})}),p.removeEventListener("touchend",j),window.removeEventListener("mousedown",K),window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",j),window.cancelAnimFrame(w),w=void 0,i.dragAndMove=!1,Z(!0)},n.isScrollingDown=function(){return!z&&S?S:S="down"===M},n.c=r.c;var nn=n["common".charAt(0)];return"complete"===document.readyState&&nn("dragAndMove"),window.addEventListener("load",function(){nn("dragAndMove")}),n};